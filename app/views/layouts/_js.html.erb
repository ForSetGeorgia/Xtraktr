<%-
  main_js ||= 'application'
-%>
    <!-- Javascripts
    ================================================== -->
    <%= javascript_include_tag  *(@js.present? ? [main_js, @js].flatten : [main_js]), :media => "all" %>
    <script type="text/javascript">
      I18n.defaultLocale = "<%= I18n.default_locale %>";
      I18n.locale = "<%= I18n.locale %>";
      I18n.available_locales = "<%= I18n.available_locales.map{|x| x.to_s}.join(',') %>".split(',');
    </script>

    <% if Rails.env.production? && ENV['XTRAKTR_ANALYTICS_ID'].present? %>
      <script async src="https://www.googletagmanager.com/gtag/js?id=<%= ENV['XTRAKTR_ANALYTICS_ID'] %>"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '<%= ENV['XTRAKTR_ANALYTICS_ID'] %>');
      </script>
    <% end %>

<% if session[:download_url].present? %>
  <script>download_request("<%= session[:download_url] %>",{});</script>
  <% session[:download_url] = nil %>
<% end %>

<% if @addthis_id %>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=<%= @addthis_id %>" async="async"></script>
<% end %>
